<!--
    页面名称：【物业服务人员主页】添加服务请求
    前端负责人：刘洋
    js路径：js/controllers/staffHome/newServiceRequest.js
    创建时间：2015/6/1
    修改日期：2015/6/8
-->
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        #menu{margin:10px;width:200px;overflow:hidden;}
        #menu li{line-height:25px;}
        #menu li a{color:#666666;padding-left:5px;outline:none;}
        #menu li input{vertical-align:middle;margin-left:5px;}
        #menu .two{padding-left:10px;display:none;}
        .col-md-2 button{width: 90px;height: 60px;margin-top: 20px;margin-bottom: 10px}
    </style>
    <script type="text/ng-template" id="top-addRequest">
        <div ng-include="'page/propertyService/staffHome/newServiceRequest/addRequest.html'"></div>
    </script>
    <script type="text/ng-template" id="top-addRequest1">
        <div ng-include="'page/propertyService/staffHome/newServiceRequest/addRequest1.html'"></div>
    </script>
</head>
<body ng-controller="ServiceAddCtrl">
<!--添加服务请求-->
<div class="complaint_user_list">
    <div >
        <div class="col-md-12" style="margin-left: 100px">
            <!--请求基本信息-->
            <table style="margin: 10px 60px;line-height: 30px">
                <tr>
                    <!--<td style="white-space: nowrap;text-align: right">服务编号：</td><td width="190">1001</td>-->
                    <td style="white-space: nowrap;text-align: right">请求来源：</td><td width="190">前台</td>
                    <td style="white-space: nowrap;text-align: right">客户名称：</td><td>周润发</td>
                </tr>
                <tr>
                    <!--<td style="white-space: nowrap;text-align: right">服务请求名称：</td>-->
                    <!--<td width="190"><input type="text" class="input-sm form-control" style="width:150px;"></td>-->
                    <td style="white-space: nowrap;text-align: right">服务请求类型：</td>
                    <td width="190"><select><option>业主请求</option></select></td>
                </tr>
            </table>
            <!--请求基本信息end-->
            <!--选择地址-->
            <div class="col-md-12">
                <p>地址：</p>
                <div class="col-md-2" style="border: 1px solid rgba(0, 0, 0, 0.99);height: 300px;overflow-y: auto;overflow-x: hidden">
                    <!--树形-->
                    <ul id="menu" style="margin-left:-45px;">
                        <li ng-repeat="tree in trees">
                            <label><a href="javascript:" class="glyphicon glyphicon-play">{{tree.title}}</a></label>
                            <!--二级-->
                            <ul class="two">
                                <li ng-repeat="treeNode in tree.nodes" >
                                    <label><a href="javascript:" class="glyphicon glyphicon-play">{{treeNode.title}}</a></label>
                                    <!--三级 <input type="checkbox" value="123456">-->
                                    <ul class="two">
                                        <li ng-repeat="treeNode in treeNode.nodes" >
                                            <label><a href="javascript:" class="glyphicon glyphicon-play">{{treeNode.title}}</a></label>
                                            <!--四级 <input type="checkbox" value="123456">-->
                                            <ul class="two">
                                                <li  ng-repeat="treeNode in treeNode.nodes" >
                                                    <label><a href="#tree" data-toggle="tab">{{treeNode.title}}</a></label></li>
                                            </ul>
                                            <!--四级 end-->
                                        <li>
                                    </ul>
                                    <!--三级 end  -->
                                </li>
                            </ul>
                            <!--二级-->
                        </li>
                    </ul>
                    <!--<ul id="menu" style="margin-left:-45px;">-->
                        <!--<li>-->
                            <!--<label><a href="javascript:" class="glyphicon glyphicon-play">桃源居</a></label>-->
                            <!--<ul class="two">-->
                                <!--<li>-->
                                    <!--<label><a href="javascript:">一区</a></label>-->
                                    <!--<ul class="two">-->
                                        <!--<li>-->
                                            <!--<label><input type="checkbox" value="123456"><a href="javascript:">一栋</a></label>-->
                                            <!--<ul class="two">-->
                                                <!--<li><label><input type="checkbox" value="123456"><a href="javascript:">101</a></label></li>-->
                                                <!--<li>-->
                                                    <!--<label><input type="checkbox" value="123456"><a href="javascript:">102</a></label>-->
                                            <!--</ul>-->
                                        <!--<li>-->
                                            <!--<label><input type="checkbox" value="123456"><a href="javascript:">二栋</a></label></li>-->
                                    <!--</ul>-->
                                <!--</li>-->
                                <!--<li><label><a href="javascript:">二区</a></label></li>-->
                            <!--</ul>-->
                        <!--</li>-->
                    <!--</ul>-->
                    <!--树形 end-->
                </div>
                <div class="col-md-1"style="margin-top: 130px"  >
                    <span class="glyphicon glyphicon-arrow-right"></span>
                </div>
                <div class="col-md-4 tab-pane fade" id="tree" style="margin: 5px 5px;border: 1px solid rgba(0, 0, 0, 0.99);height: 50px;margin-top: 120px;">
                    <p style="margin-left: 100px;margin-top: 15px;">桃源居一区一栋101</p>
                </div>
            </div>
            <!--选择地址 end-->
            <!--其它信息-->
            <table class="" style="margin: 15px; ">
                <tr>
                    <td>回访人：</td>
                    <td><label><select id="select1" onChange="myselect()"><option value="zrf">周润发</option><option value="chl">陈荟莲</option><option value="w">无</option></select></label></td>
                    <td>联系电话：</td>
                    <td><label><select id="select2"><option value="0">请输入电话</option></select></label></td>
                </tr>
                <tr>
                    <td>重大事项：</td>
                    <td>
                        <label class="radio-inline">
                            <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" checked> 是
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2"> 否
                        </label>
                    </td>
                    <!--<td></td>-->
                    <td>
                        <span style="margin-left: 50px;">是否加急：</span>
                        <label class="radio-inline">
                            <input type="radio" name="inlineRadioOption" id="inlineRadio3" value="option1" checked> 是
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="inlineRadioOption" id="inlineRadio4" value="option2"> 否
                        </label>
                    </td>
                    <!--<td style="text-align: right">优先级：</td>-->
                    <!--<td><label><select><option>高</option><option>中</option><option>低</option></select></label></td>-->
                    <!--<td>重要程度：</td>-->
                    <!--<td><label><select><option>高</option><option>中</option><option>低</option></select></label></td>-->
                    <!--<td style="color: #ff0000">重大事项:</td>-->
                    <!--<td><label><select><option>是</option><option>否</option></select></label></td>-->
                </tr>
                <tr>
                    <!--<td>客户希望处理时间：</td>-->
                    <!--<td width="100"><label><input type="date" class="form-control input-sm" style="height:25px;"></label></td>-->
                    <!--<td style="padding-left: 10px"><label><select><option>9:00</option><option>10:00</option><option>11:00</option></select></label></td>-->
                    <!--<td>~<label><select><option>9:00</option><option>10:00</option><option>11:00</option></select></label></td>-->
                </tr>
            </table>
            <table>
                <tr>
                    <td>事由描述：</td>
                    <td><textarea class="form-control" style="width:450px" cols="3" placeholder="请输入内容"></textarea></td>
                </tr>
            </table>
            <!--其它信息end-->
            <!--添加任务类型-->
            <div style="margin-top: 15px;" ng-repeat="vm in vms">
                <p>创建任务：</p>
                <!--点击"+"号显示隐藏内容-->
                <span onclick="return click_a('divOne_0')" style="cursor:pointer;" class="glyphicon glyphicon-plus"></span>
                <div id="divOne_0" style="display: none;margin: 10px 20px">
                    <!--<p class="col-md-2">任务ID：1001</p>-->
                    <p class="col-md-2">客户:周润发</p>
                    <div class="col-md-offset-4">
                        <select>
                            <!--<option ng-repeat="option in taskType">{{option.typeName}}</option>-->
                            <option><a  href="javascript:void(0);" ng-click="changeTemplate(0)">室内装修</a></option>
                            <option><a  href="javascript:void(0);" ng-click="changeTemplate(1)">赔偿给业主</a></option>
                            <option><a  href="javascript:void(0);" ng-click="changeTemplate(0)">清洁</a></option>
                            <option><a  href="javascript:void(0);" ng-click="changeTemplate(0)">园林</a></option>
                            <option><a  href="javascript:void(0);" ng-click="changeTemplate(0)">安保</a></option>
                            <option><a  href="javascript:void(0);" ng-click="changeTemplate(0)">邻里纠纷</a></option>
                            <option><a  href="javascript:void(0);" ng-click="changeTemplate(0)">重大事项</a></option>
                        </select>
                        <a  href="javascript:void(0);" ng-click="changeTemplate(1)">33</a>
                        <a  href="javascript:void(0);" ng-click="changeTemplate(0)">22</a>
                    </div>
                    <div class="container-fluid">
                        <div class="container-fluid row">
                            <div ng-include="currentTemplate">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--添加任务类型 end-->
        </div>
    </div>
    <div style="margin:20px 270px">
        <button style="height: 30px;width: 90px" class="" ui-sref="index.propertyService.staffHome.serviceRequest"ng-click= "submit()">提交</button>
        <button style="height: 30px;width: 90px" ui-sref="index.propertyService.staffHome.serviceRequest">取消</button>
    </div>
</div>
<!--添加服务请求 end-->
<script>
    function click_a(divDisplay)
    {
        if(document.getElementById(divDisplay).style.display != "block")
        {
            document.getElementById(divDisplay).style.display = "block";
        }
        else
        {
            document.getElementById(divDisplay).style.display = "none";
        }
    }
    function addEvent(el,name,fn){
        if(el.addEventListener) return el.addEventListener(name,fn,false);
        return el.attachEvent('on'+name,fn);
    }
    function nextnode(node){
        if(!node)return ;
        if(node.nodeType == 1)
            return node;
        if(node.nextSibling)
            return nextnode(node.nextSibling);
    }
    function prevnode(node){
        if(!node)return ;
        if(node.nodeType == 1)
            return node;
        if(node.previousSibling)
            return prevnode(node.previousSibling);
    }
    function parcheck(self,checked){
        var par =  prevnode(self.parentNode.parentNode.parentNode.previousSibling);
        if(par&&par.getElementsByTagName('input')[0]){
            par.getElementsByTagName('input')[0].checked = checked;
            parcheck(par.getElementsByTagName('input')[0],sibcheck(par.getElementsByTagName('input')[0]));
        }
    }
    function sibcheck(self){
        var sbi = self.parentNode.parentNode.parentNode.childNodes,n=0;
        for(var i=0;i<sbi.length;i++){
            if(sbi[i].nodeType != 1)
                n++;
            else if(sbi[i].getElementsByTagName('input')[0].checked)
                n++;
        }
    }
    addEvent(document.getElementById('menu'),'click',function(e){
        e = e||window.event;
        var target = e.target||e.srcElement;
        var tp = nextnode(target.parentNode.nextSibling);
        switch(target.nodeName){
            case 'A':
                if(tp&&tp.nodeName == 'UL'){
                    if(tp.style.display != 'block' ){
                        tp.style.display = 'block';
                    }else{
                        tp.style.display = 'none';
                    }
                }
                break;
            case 'SPAN':
                var ap = nextnode(nextnode(target.nextSibling).nextSibling);
                if(ap.style.display != 'block' ){
                    ap.style.display = 'block';
                }else{
                    ap.style.display = 'none';
                }
                break;
            case 'INPUT':
                if(target.checked){
                    if(tp){
                        var checkbox = tp.getElementsByTagName('input');
                        for(var i=0;i<checkbox.length;i++)
                            checkbox[i].checked = true;
                    }
                }else{
                    if(tp){
                        var checkbox= tp.getElementsByTagName('input');
                        for(var i=0;i<checkbox.length;i++)
                            checkbox[i].checked = false;
                    }
                }
                parcheck(target,sibcheck(target));
                break;
        }
    });
</script>
</body>
</html>